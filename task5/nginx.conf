upstream localhost {
    server  app1:8080;
    server  app2:8080;
    server  app3:8080;
    server  app4:8080;
}

server {
    listen 8080;
    location ^~ / {
        proxy_pass http://localhost;
        proxy_set_header Host $host:$server_port;
    }
}